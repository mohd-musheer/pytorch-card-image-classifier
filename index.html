<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Card Detective AI</title>
<script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="bg-gray-900 min-h-screen flex items-center justify-center p-6">
<div class="bg-white rounded-3xl shadow-2xl max-w-sm w-full overflow-hidden">
<div class="bg-blue-600 p-4 text-center">
<h1 class="text-white font-bold text-lg uppercase tracking-widest">Card Detective</h1>
</div>

<div class="p-6 space-y-6">
<div class="relative h-64 bg-gray-100 rounded-2xl flex items-center justify-center border-2 border-dashed border-gray-300">
<img id="preview" class="hidden absolute inset-0 w-full h-full object-contain p-2 rounded-2xl">
<div id="placeholder" class="text-gray-400 text-sm">Click to upload card image</div>
<input type="file" id="fileInput" class="absolute inset-0 opacity-0 cursor-pointer" onchange="previewFile()">
</div>

<div class="text-center bg-gray-50 p-4 rounded-xl border">
<p class="text-xs font-bold text-gray-400 uppercase tracking-widest">Prediction</p>
<div id="result" class="text-2xl font-black text-blue-600 mt-1">WAITING...</div>
<div id="conf" class="text-xs text-gray-400 mt-1">Confidence: --</div>
</div>

<button onclick="sendPredict()" class="w-full bg-blue-600 text-white font-bold py-3 rounded-xl hover:bg-blue-700 transition">
IDENTIFY NOW
</button>
</div>
</div>

<script>
function previewFile(){
    const file=document.getElementById("fileInput").files[0]
    if(!file) return
    const reader=new FileReader()
    reader.onload=e=>{
        document.getElementById("preview").src=e.target.result
        document.getElementById("preview").classList.remove("hidden")
        document.getElementById("placeholder").classList.add("hidden")
    }
    reader.readAsDataURL(file)
}

async function sendPredict(){
    const file=document.getElementById("fileInput").files[0]
    if(!file) return alert("Select an image")

    document.getElementById("result").innerText="ANALYZING..."
    document.getElementById("conf").innerText="Confidence: --"

    const formData=new FormData()
    formData.append("file",file)

    const res=await fetch("/predict",{method:"POST",body:formData})
    const data=await res.json()

    document.getElementById("result").innerText=data.prediction
    document.getElementById("conf").innerText="Confidence: "+data.confidence
}
</script>
</body>
</html>
